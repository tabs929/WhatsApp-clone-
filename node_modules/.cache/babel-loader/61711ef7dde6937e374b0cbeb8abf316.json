{"ast":null,"code":"import _slicedToArray from\"C:/Users/DELL/OneDrive/Desktop/whatsApp clone/whatsappclone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import\"./SidebarChat.css\";import{Avatar}from\"@material-ui/core\";import db from'./firebase';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){if(id){db.collection('rooms').doc(id).collection(\"messages\").orderBy('timestamp',\"desc\").onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var createChat=function createChat(){var roomName=prompt(\"Please enter name for chat\");if(roomName){//do somet\ndb.collection('rooms').add({name:roomName});}};return!addNewChat?/*#__PURE__*/_jsx(Link,{to:\"/rooms/\".concat(id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat\",children:[/*#__PURE__*/_jsx(Avatar,{src:\" http://avatars.dicebear.com/api/human/\"+seed+\".svg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsx(\"p\",{children:(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message})]})]})}):/*#__PURE__*/_jsx(\"div\",{onClick:createChat,className:\"sidebarChat\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"add new chat\"})});}export default SidebarChat;","map":{"version":3,"sources":["C:/Users/DELL/OneDrive/Desktop/whatsApp clone/whatsappclone/src/SidebarChat.js"],"names":["React","useEffect","useState","Avatar","db","Link","SidebarChat","id","name","addNewChat","seed","setSeed","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","createChat","roomName","prompt","add","message"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAO,mBAAP,CACA,OAAQC,MAAR,KAAqB,mBAArB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,wFAGA,QAASC,CAAAA,WAAT,MAA2C,mBAArBC,CAAAA,EAAqB,MAArBA,EAAqB,CAAlBC,IAAkB,MAAlBA,IAAkB,CAAbC,UAAa,MAAbA,UAAa,CACvC,cAAuBP,QAAQ,CAAC,EAAD,CAA/B,wCAAOQ,IAAP,eAAYC,OAAZ,eACA,eAA+BT,QAAQ,CAAC,EAAD,CAAvC,yCAAOU,QAAP,eAAgBC,WAAhB,eAEAZ,SAAS,CAAC,UAAM,CACZ,GAAGM,EAAH,CAAO,CACHH,EAAE,CAACU,UAAH,CAAc,OAAd,EACCC,GADD,CACKR,EADL,EACSO,UADT,CACoB,UADpB,EAECE,OAFD,CAES,WAFT,CAEqB,MAFrB,EAGCC,UAHD,CAGY,SAACC,QAAD,QACJL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAC1BA,CAAAA,GAAG,CAACM,IAAJ,EAD0B,EAAlB,CAAD,CADP,EAHZ,EAOH,CACJ,CAVQ,CAUP,EAVO,CAAT,CAYApB,SAAS,CAAC,UAAI,CACVU,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAe,IAA1B,CAAD,CAAP,CACH,CAFQ,CAEP,EAFO,CAAT,CAIA,GAAMC,CAAAA,UAAU,CAAE,QAAZA,CAAAA,UAAY,EAAM,CACpB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,4BAAD,CAAvB,CAEA,GAAGD,QAAH,CAAa,CACT;AACAtB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBc,GAAvB,CAA2B,CACvBpB,IAAI,CAACkB,QADkB,CAA3B,EAGH,CACJ,CATD,CAWA,MAAO,CAACjB,UAAD,cACH,KAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,uBACQ,aAAK,SAAS,CAAC,aAAf,wBACJ,KAAC,MAAD,EAAQ,GAAG,CAAE,0CAA0CG,IAA1C,CAA+C,MAA5D,EADI,cAEJ,aAAK,SAAS,CAAC,mBAAf,wBACI,oBAAKF,IAAL,EADJ,cAEI,+BAAII,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAaiB,OAAjB,EAFJ,GAFI,GADR,EADG,cAYH,YAAK,OAAO,CAAGJ,UAAf,CAA2B,SAAS,CAAC,aAArC,uBACI,oCADJ,EAZJ,CAgBH,CAED,cAAenB,CAAAA,WAAf","sourcesContent":["import React ,{useEffect ,useState} from 'react';\r\nimport \"./SidebarChat.css\";\r\nimport {Avatar} from \"@material-ui/core\"\r\nimport db from './firebase';\r\nimport {Link} from \"react-router-dom\" ;\r\n\r\n\r\nfunction SidebarChat({id,name,addNewChat}) {\r\n    const [seed,setSeed] = useState('');\r\n    const [messages,setMessages] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if(id) {\r\n            db.collection('rooms')\r\n            .doc(id).collection(\"messages\")\r\n            .orderBy('timestamp',\"desc\")\r\n            .onSnapshot((snapshot) => (\r\n                    setMessages(snapshot.docs.map((doc) =>\r\n                        doc.data()))\r\n                    ));\r\n        }\r\n    },[]);\r\n\r\n    useEffect(()=>{\r\n        setSeed(Math.floor(Math.random()* 5000));\r\n    },[]);\r\n\r\n    const createChat= () => {\r\n        const roomName = prompt(\"Please enter name for chat\");\r\n\r\n        if(roomName) {\r\n            //do somet\r\n            db.collection('rooms').add({\r\n                name:roomName,\r\n            })\r\n        }\r\n    };\r\n\r\n    return !addNewChat ? (\r\n        <Link to={`/rooms/${id}`}>\r\n                <div className=\"sidebarChat\">\r\n            <Avatar src={\" http://avatars.dicebear.com/api/human/\"+seed+\".svg\"} />\r\n            <div className=\"sidebarChat__info\">\r\n                <h2>{name}</h2>\r\n                <p>{messages[0]?.message}</p>\r\n            </div>\r\n        </div>\r\n        </Link>\r\n        \r\n    ) : (\r\n        <div onClick ={createChat} className=\"sidebarChat\">\r\n            <h2>add new chat</h2>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SidebarChat"]},"metadata":{},"sourceType":"module"}